<!doctype html>
<html>
<head>
  <title>Refresh Elixir</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white">

<!-- HERO -->
<section class="relative min-h-screen flex items-center">
  <img src="images/100ml.jpg"
       class="absolute inset-0 w-full h-full object-cover object-center opacity-50">
  <div class="absolute inset-0 bg-black/60"></div>

  <div class="relative z-10 max-w-6xl mx-auto px-6">
    <h1 class="text-6xl font-bold">Refresh Elixir</h1>
    <p class="mt-4 text-white/80 text-lg">
      Premium perfumes crafted for presence and memory.
    </p>
    <a href="./products.html"
       class="inline-block mt-8 bg-pink-600 px-7 py-3 rounded-full">
      Explore Collection
    </a>
  </div>
</section>

<!-- BEST SELLERS -->
<section class="max-w-6xl mx-auto px-6 py-20">
  <h2 class="text-2xl mb-8">Best Sellers</h2>
  <div id="grid" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
</section>

<script type="module">
import { PRODUCTS, SIZES } from "./data.js";

const BEST = [1,10,12,16,17,18,19,21,23,29,32,33,38,39];
const grid = document.getElementById("grid");

function addToCart(p, size) {
  const cart = JSON.parse(localStorage.getItem("cart") || "[]");
  const found = cart.find(i => i.id === p.id && i.ml === size.ml);

  if (found) found.qty++;
  else cart.push({ id:p.id, name:p.name, ml:size.ml, price:size.price, qty:1 });

  localStorage.setItem("cart", JSON.stringify(cart));
  location.href = "checkout.html";
}

PRODUCTS.filter(p => BEST.includes(p.id)).forEach(p => {
  let selectedSize = SIZES[0]; // 100ml DEFAULT

  const card = document.createElement("div");
  card.className = "border border-white/10 p-6 rounded";

  card.innerHTML = `
    <img src="${selectedSize.image}" class="h-40 mx-auto mb-4">
    <h3>${p.name}</h3>
    <select class="mt-2 w-full bg-black border p-2">
      ${SIZES.map(s =>
        `<option value="${s.ml}">${s.ml}ml — ₹${s.price}</option>`
      ).join("")}
    </select>
    <button class="mt-4 w-full bg-pink-600 py-2 rounded">Buy Now</button>
  `;

  const img = card.querySelector("img");
  const sel = card.querySelector("select");

  sel.onchange = () => {
    selectedSize = SIZES.find(s => s.ml == sel.value);
    img.src = selectedSize.image;
  };

  card.querySelector("button").onclick = () => addToCart(p, selectedSize);
  grid.appendChild(card);
});
</script>

</body>
</html>

