<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Perfume Collection â€“ Refresh Elixir</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-neutral-950 text-white">

<!-- HEADER -->
<header class="max-w-6xl mx-auto px-6 py-16 space-y-6">
  <h1 class="text-4xl font-light tracking-wide">
    Perfume Collection
  </h1>

  <input
    id="searchInput"
    type="text"
    placeholder="Search by perfume name"
    class="w-full px-4 py-3 rounded-lg bg-neutral-900 border border-white/10 outline-none"
  />
</header>

<!-- CATEGORY FILTER -->
<section class="max-w-6xl mx-auto px-6 pb-10">
  <div class="flex flex-wrap gap-3">
    <button class="cat-btn active" data-cat="ALL">All</button>
    <button class="cat-btn" data-cat="Musk">Musk</button>
    <button class="cat-btn" data-cat="Fresh">Fresh</button>
    <button class="cat-btn" data-cat="Floral">Floral</button>
    <button class="cat-btn" data-cat="Aquatic">Aquatic</button>
    <button class="cat-btn" data-cat="Woody">Woody</button>
    <button class="cat-btn" data-cat="Spicy">Spicy</button>
    <button class="cat-btn" data-cat="Sweet">Sweet</button>
  </div>
</section>

<!-- PRODUCTS -->
<section class="max-w-6xl mx-auto px-6 pb-24">
  <div
    id="productsGrid"
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"
  ></div>
</section>

<script type="module">
import { PRODUCTS } from "./data.js";

const grid = document.getElementById("productsGrid");
const buttons = document.querySelectorAll(".cat-btn");
const searchInput = document.getElementById("searchInput");

let activeCategory = "ALL";

function render(list) {
  grid.innerHTML = "";

  if (!list.length) {
    grid.innerHTML =
      "<p class='text-white/50'>No perfumes found.</p>";
    return;
  }

  list.forEach(p => {
    const card = document.createElement("div");
    card.className =
      "border border-white/10 rounded-2xl p-6 hover:border-pink-500 transition";

    card.innerHTML = `
      <h3 class="text-lg font-medium">${p.name}</h3>
      <p class="text-sm text-white/60 mt-2">${p.scentProfile}</p>

      <details class="mt-4 text-sm text-white/70">
        <summary class="cursor-pointer text-pink-500">
          View details
        </summary>
        <div class="mt-3 space-y-1">
          <p><strong>Character:</strong> ${p.character}</p>
          <p><strong>Best for:</strong> ${p.occasion}</p>
        </div>
      </details>
    `;

    grid.appendChild(card);
  });
}

function applyFilters() {
  const q = searchInput.value.toLowerCase();

  let list = PRODUCTS;

  if (activeCategory !== "ALL") {
    list = list.filter(p => p.category === activeCategory);
  }

  if (q) {
    list = list.filter(p =>
      p.name.toLowerCase().includes(q)
    );
  }

  render(list);
}

/* CATEGORY */
buttons.forEach(btn => {
  btn.addEventListener("click", () => {
    buttons.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");

    activeCategory = btn.dataset.cat;
    applyFilters();
  });
});

/* SEARCH */
searchInput.addEventListener("input", applyFilters);

/* LOAD */
window.addEventListener("DOMContentLoaded", () => {
  render(PRODUCTS);
});
</script>

<style>
.cat-btn {
  padding: 8px 16px;
  border-radius: 9999px;
  border: 1px solid rgba(255,255,255,0.15);
  font-size: 14px;
}
.cat-btn.active {
  background: #ec4899;
  border-color: #ec4899;
}
</style>

</body>
</html>
